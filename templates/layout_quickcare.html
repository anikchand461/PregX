<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>{% block title %}QuickCare{% endblock %}</title>
<link rel="stylesheet" href="{{ url_for('static', filename='css/quickcare.css') }}">
<style>
/* Hamburger styling */
.hamburger {
    display: none;
    flex-direction: column;
    justify-content: space-between;
    width: 25px;
    height: 18px;
    cursor: pointer;
}

.hamburger span {
    display: block;
    height: 3px;
    background: #333;
    border-radius: 2px;
}

/* Slide-in menu */
.mobile-menu {
    position: fixed;
    top: 0;
    right: -250px; /* hidden initially */
    width: 250px;
    height: 100%;
    background: #fff;
    box-shadow: -4px 0 8px rgba(0,0,0,0.1);
    padding: 50px 20px;
    display: flex;
    flex-direction: column;
    gap: 20px;
    transition: right 0.3s ease-in-out;
    z-index: 2000;
}

.mobile-menu.show {
    right: 0;
}

.mobile-menu a {
    text-decoration: none;
    color: #333;
    font-size: 18px;
}

.mobile-menu .auth-buttons {
    margin-top: 20px;
    display: flex;
    flex-direction: column;
    gap: 10px;
}

/* Close button inside sidebar */
.mobile-menu .close-btn {
    position: absolute;
    top: 15px;
    right: 15px;
    font-size: 25px;
    cursor: pointer;
    color: #333;
}

/* Mobile adjustments */
@media (max-width: 768px) {
    .nav-links {
        display: none; /* hide normal links on mobile */
    }

    .hamburger {
        display: flex;
        position: absolute;
        top: 15px;
        right: 20px;
        z-index: 2100;
    }

    .auth-buttons {
        display: none; /* hide auth buttons from navbar */
    }

    .navbar {
        position: relative;
    }
}
</style>
{% block extra_css %}{% endblock %}
</head>
<body>
<header class="header">
    <div class="container">
        <nav class="navbar" style="position: relative;">
            <a href="{{ url_for('index') }}" class="logo">
                <svg width="40" height="40" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M3.5 18V7C3.5 5.89543 4.39543 5 5.5 5H18.5C19.6046 5 20.5 5.89543 20.5 7V18C20.5 19.1046 19.6046 20 18.5 20H5.5C4.39543 20 3.5 19.1046 3.5 18Z" stroke="#ff6b6b" stroke-width="2"/>
                    <path d="M12 8V16" stroke="#ff6b6b" stroke-width="2" stroke-linecap="round"/>
                    <path d="M8 12H16" stroke="#ff6b6b" stroke-width="2" stroke-linecap="round"/>
                </svg>
                <span class="logo-text">QuickCare</span>
            </a>

            <!-- Hamburger -->
            <div class="hamburger" id="hamburger">
                <span></span>
                <span></span>
                <span></span>
            </div>

            <ul class="nav-links">
                <li><a href="{{ url_for('index') }}">Home</a></li>
                <li><a href="{{ url_for('services') }}">Services</a></li>
                <li><a href="{{ url_for('about') }}">About</a></li>
            </ul>

            <div class="auth-buttons">
                {% if current_user.is_authenticated %}
                    <a href="{{ url_for('logout') }}" class="btn btn-login">Logout</a>
                {% else %}
                    <a href="{{ url_for('login') }}" class="btn btn-login">Login</a>
                    <a href="{{ url_for('register') }}" class="btn btn-register">Register</a>
                {% endif %}
            </div>
        </nav>
    </div>
</header>

<!-- Mobile Slide-in Menu -->
<div class="mobile-menu" id="mobileMenu">
    <span class="close-btn" id="closeMenu">&times;</span>
    <a href="{{ url_for('index') }}">Home</a>
    <a href="{{ url_for('services') }}">Services</a>
    <a href="{{ url_for('about') }}">About</a>
    <div class="auth-buttons">
        {% if current_user.is_authenticated %}
            <a href="{{ url_for('logout') }}" class="btn btn-login">Logout</a>
        {% else %}
            <a href="{{ url_for('login') }}" class="btn btn-login">Login</a>
            <a href="{{ url_for('register') }}" class="btn btn-register">Register</a>
        {% endif %}
    </div>
</div>

<main>
    <div class="container">
        {% with messages = get_flashed_messages(with_categories=true) %}
            {% if messages %}
                {% for category, message in messages %}
                    <div class="alert alert-{{ category }}">
                        {{ message }}
                    </div>
                {% endfor %}
            {% endif %}
        {% endwith %}
        {% block content %}{% endblock %}
    </div>
</main>

<footer>
    <div class="container">
        <p>&copy; {{ current_year|default("2023") }} QuickCare. All rights reserved.</p>
    </div>
</footer>

{% block scripts %}
<script>
// Hamburger slide-in menu
const hamburger = document.getElementById('hamburger');
const mobileMenu = document.getElementById('mobileMenu');
const closeMenu = document.getElementById('closeMenu');

hamburger.addEventListener('click', () => {
    mobileMenu.classList.add('show');
});

closeMenu.addEventListener('click', () => {
    mobileMenu.classList.remove('show');
});
</script>
{% endblock %}
</body>
</html>